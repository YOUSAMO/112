<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>AdoptBridge - ìœ ê¸°ë™ë¬¼ ì…ì–‘ í”Œë«í¼</title>
</head>
<style>
    :root {
        --main-bg: #f9f6ef;
        --card-bg: #fff8ee;
        --accent: #ffb74d;
        --accent-dark: #ff7043;
        --text-main: #3e2723;
        --text-accent: #bf360c;
        --shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    body {
        font-family: 'Segoe UI', 'Apple SD Gothic Neo', Arial, sans-serif;
        background: var(--main-bg);
        color: var(--text-main);
        margin: 0;
        padding-bottom: 70px; /* í•˜ë‹¨ í€µë©”ë‰´ ê³µê°„ í™•ë³´ */
    }
    .top-menu {
        position: fixed;
        top: 0; left: 0; width: 100%;
        height: 60px;
        background: var(--card-bg);
        box-shadow: var(--shadow);
        display: flex; align-items: center; justify-content: space-between;
        padding: 0 32px; z-index: 1000;
    }
    .logo {
        font-size: 1.5em; font-weight: bold; color: var(--accent-dark);
        letter-spacing: 1.5px;
    }
    .top-menu nav a {
        color: var(--text-main); text-decoration: none; margin-left: 28px;
        font-weight: 500; transition: color 0.2s;
    }
    .top-menu nav a:hover {
        color: var(--accent-dark);
    }
    .alert-bar {
        position: fixed; top: 60px; left: 0; width: 100%;
        background: #ffe0b2; color: var(--text-accent);
        text-align: center; font-weight: bold; padding: 10px 0;
        z-index: 999;
        box-shadow: 0 2px 8px rgba(255,183,77,0.13);
        animation: fadeInDown 1s;
    }
    .hero {
        margin-top: 100px;
        text-align: center;
        padding: 60px 20px 40px 20px;
        background: linear-gradient(120deg, #fff8ee 70%, #ffe0b2 100%);
        border-radius: 0 0 36px 36px;
        box-shadow: var(--shadow);
        position: relative;
        overflow: hidden;
    }
    .hero h1 {
        font-size: 2.7em;
        color: var(--accent-dark);
        margin-bottom: 0.4em;
        animation: fadeInDown 1s;
    }
    .hero p {
        font-size: 1.2em;
        color: var(--text-accent);
        margin-bottom: 1.5em;
        animation: fadeIn 1.7s;
    }
    .hero .cta-btn {
        background: var(--accent-dark);
        color: #fff;
        border: none;
        border-radius: 24px;
        padding: 16px 36px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(255,112,67,0.13);
        transition: background 0.2s, transform 0.2s;
        animation: fadeInUp 1.2s;
    }
    .hero .cta-btn:hover {
        background: #d84315;
        transform: translateY(-2px) scale(1.04);
    }
    /* ìŠ¬ë¼ì´ë” */
    .slider {
        margin: 40px auto 32px auto;
        max-width: 900px;
        height: 260px;
        position: relative;
        overflow: hidden;
        border-radius: 20px;
        box-shadow: var(--shadow);
        background: #fff8ee;
    }
    .slide {
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        opacity: 0; transition: opacity 0.8s ease-in-out; /* transition íš¨ê³¼ ê°œì„  */
        display: flex; align-items: center; justify-content: center;
        font-size: 2em; font-weight: bold;
        color: var(--accent-dark);
        background-size: cover;
        background-position: center;
    }
    .slide.active { opacity: 1; z-index: 1; }
    .slider .dots {
        position: absolute; bottom: 18px; left: 50%; transform: translateX(-50%);
        display: flex; gap: 10px; z-index: 2; /* ì ì´ ìŠ¬ë¼ì´ë“œ ìœ„ì— ì˜¤ë„ë¡ z-index ì¶”ê°€ */
    }
    .slider .dot {
        width: 12px; height: 12px; border-radius: 50%;
        background: #ffe0b2; cursor: pointer;
        border: 2px solid var(--accent-dark);
        transition: background 0.2s;
    }
    .slider .dot.active { background: var(--accent-dark); }

    /* ì…ì–‘ ì ˆì°¨ ì•ˆë‚´ */
    .adopt-process {
        max-width: 900px; margin: 48px auto;
        background: #fff8ee;
        border-radius: 16px;
        box-shadow: var(--shadow);
        padding: 32px 24px;
    }
    .adopt-process h3 {
        color: var(--accent-dark); margin-bottom: 18px;
    }
    .process-steps {
        display: flex; gap: 28px; flex-wrap: wrap; justify-content: center;
    }
    .step {
        flex: 1 1 180px;
        min-width: 160px;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(255,183,77,0.08);
        padding: 18px 10px;
        text-align: center;
        margin-bottom: 14px;
    }
    .step .num {
        background: var(--accent-dark); color: #fff; border-radius: 50%;
        width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center;
        font-weight: bold; margin-bottom: 10px; font-size: 1.1em;
    }
    .step .desc {
        color: var(--text-main); font-size: 1em;
    }

    /* ë³´í˜¸ì†Œ ì†Œê°œ */
    .shelter-info {
        max-width: 900px; margin: 48px auto;
        background: #fff8ee;
        border-radius: 16px;
        box-shadow: var(--shadow);
        padding: 32px 24px;
        text-align: center;
    }
    .shelter-info h3 { color: var(--accent-dark); margin-bottom: 14px;}
    .shelter-list { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center;}
    .shelter-card {
        background: #fff;
        border-radius: 11px;
        box-shadow: 0 2px 8px rgba(255,183,77,0.08);
        padding: 16px;
        min-width: 180px; flex: 1 1 200px;
        margin-bottom: 10px;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .shelter-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 6px 16px rgba(255,183,77,0.2);
    }
    .shelter-card .name { color: var(--accent-dark); font-weight: bold;}
    .shelter-card .desc { font-size: 0.9em; color: #6d4c41; margin-top: 6px; }

    /* ë™ë¬¼ ì¹´ë“œ */
    #animal-section {
        max-width: 1000px;
        margin: 48px auto;
        padding: 0 20px;
    }
    .animal-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 28px;
    }
    .animal-card {
        background: #fff;
        border-radius: 14px;
        box-shadow: var(--shadow);
        overflow: hidden;
        display: flex; flex-direction: column;
        transition: transform 0.18s, opacity 0.3s;
        animation: fadeIn 1.2s;
    }
    .animal-card:hover { transform: translateY(-5px) scale(1.025);}
    .animal-card img {
        width: 100%; height: 220px; object-fit: cover;
        border-bottom: 3px solid var(--accent);
    }
    .animal-card .info {
        padding: 18px 16px 16px 16px; flex-grow: 1; display: flex; flex-direction: column;
    }
    .animal-card .info h4 {
        margin: 0 0 8px 0; color: var(--accent-dark);
        font-size: 1.2em;
    }
    .animal-card .info p {
        margin: 0 0 6px 0; color: #6d4c41;
        font-size: 0.95em;
        line-height: 1.5;
    }
    .animal-card .info .tag {
        background-color: var(--accent);
        color: white;
        padding: 3px 8px;
        border-radius: 12px;
        font-size: 0.8em;
        font-weight: bold;
        display: inline-block;
        margin-top: auto;
    }

    /* í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ ê³µí†µ ìŠ¤íƒ€ì¼ (ë³´í˜¸ì†Œ, ë™ë¬¼ ëª©ë¡ ê³µìš©) */
    .pagination-container {
        display: flex; justify-content: center; align-items: center; margin-top: 24px; gap: 8px; flex-wrap: wrap;
    }
    .pagination-container button {
        padding: 8px 12px;
        border: 1px solid var(--accent);
        background: white;
        color: var(--accent-dark);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 500;
    }
    .pagination-container button.active {
        background: var(--accent-dark);
        color: white;
        transform: scale(1.1);
    }

    /* í•˜ë‹¨ í€µë©”ë‰´ */
    .bottom-quick-menu {
        position: fixed; bottom: 0; left: 0; width: 100%;
        height: 54px; background: var(--card-bg);
        box-shadow: 0 -2px 8px rgba(0,0,0,0.07);
        display: flex; justify-content: space-around; align-items: center;
        z-index: 1000;
    }
    .bottom-quick-menu button {
        background: var(--accent-dark); color: #fff;
        border: none; border-radius: 20px;
        padding: 10px 22px; font-size: 1em; font-weight: 500;
        cursor: pointer; transition: background 0.18s;
    }
    .bottom-quick-menu button:hover { background: #d84315; }

    /* ì• ë‹ˆë©”ì´ì…˜ */
    @keyframes fadeInDown { from {opacity:0; transform:translateY(-40px);} to {opacity:1; transform:translateY(0);} }
    @keyframes fadeInUp { from {opacity:0; transform:translateY(40px);} to {opacity:1; transform:translateY(0);} }
    @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }

    /* ë°˜ì‘í˜• */
    @media (max-width: 700px) {
        .animal-cards { grid-template-columns: 1fr;}
        .hero h1 { font-size: 2em;}
        .hero { padding: 32px 6px 26px 6px;}
        .slider { height: 180px;}
        .process-steps { flex-direction: column; gap: 12px;}
        .shelter-list { flex-direction: column; gap: 10px;}
    }

    /* í›„ê¸°/ìŠ¤í† ë¦¬ */
    .adoption-stories {
        max-width: 900px; margin: 0 auto 36px auto;
    }
    .adoption-stories h3 { color: var(--accent-dark); }
    .story-list {
        display: flex; gap: 22px; overflow-x: auto; padding-bottom: 8px;
    }
    .story-card {
        background: var(--card-bg);
        border-radius: 14px;
        box-shadow: var(--shadow);
        min-width: 270px; max-width: 280px;
        padding: 18px 14px;
        display: flex; flex-direction: column; align-items: center;
        animation: fadeIn 1.2s;
    }
    .story-card img {
        width: 70px; height: 70px; border-radius: 50%; object-fit: cover;
        margin-bottom: 10px;
    }
    .story-card .text { color: #6d4c41; font-size: 0.98em; text-align: center; }
    .story-card .author { color: var(--accent-dark); font-weight: bold; margin-top: 8px; font-size: 0.95em; }

    /* FAQ */
    .faq-section {
        max-width: 900px; margin: 0 auto 48px auto;
        background: #fff8ee;
        border-radius: 16px;
        box-shadow: var(--shadow);
        padding: 32px 24px;
    }
    .faq-section h3 { color: var(--accent-dark); margin-bottom: 16px;}
    .faq-list { margin: 0; padding: 0; }
    .faq-item {
        margin-bottom: 14px;
        border-bottom: 1px solid #ffe0b2;
        padding-bottom: 10px;
    }
    .faq-q {
        font-weight: bold; color: var(--accent-dark); cursor: pointer;
    }
    .faq-a {
        display: none; color: #6d4c41; margin-top: 5px;
    }
    .faq-item.active .faq-a { display: block; }

    /* ê³µì§€/ì´ë²¤íŠ¸/ì°¸ì—¬ */
    .notice-banner {
        background: linear-gradient(90deg, #ffe0b2 80%, #ffb74d 120%);
        border-radius: 13px;
        padding: 18px 0;
        text-align: center;
        font-weight: bold;
        color: var(--text-accent);
        font-size: 1.1em;
        margin: 0 auto 40px auto;
        max-width: 900px;
        animation: fadeInDown 1.3s;
        box-shadow: var(--shadow);
    }
    /* í•˜ë‹¨ í€µë©”ë‰´ */
    .bottom-quick-menu {
        position: fixed; bottom: 0; left: 0; width: 100%;
        height: 54px; background: var(--card-bg);
        box-shadow: 0 -2px 8px rgba(0,0,0,0.07);
        display: flex; justify-content: space-around; align-items: center;
        z-index: 1000;
    }
    .bottom-quick-menu button {
        background: var(--accent-dark); color: #fff;
        border: none; border-radius: 20px;
        padding: 10px 22px; font-size: 1em; font-weight: 500;
        cursor: pointer; transition: background 0.18s;
    }
    .bottom-quick-menu button:hover { background: #d84315; }
    footer {
        background: #222;
        color: #fff;
        padding: 30px 0 10px 0;
        margin-top: 60px;
    }
    footer ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    footer a {
        color: #fff;
        text-decoration: underline;
    }
    footer a:hover {
        color: #ffd700;
    }
    footer img {
        width: 22px;
        vertical-align: middle;
    }
    footer hr {
        border: none;
        border-top: 1px solid #444;
        margin: 24px 0 10px 0;
    }
    footer p.copyright {
        text-align: center;
        font-size: 0.95em;
        color: #aaa;
        margin: 0;
    }


</style>

<body>
<div th:replace="~{fragments/header :: commonHeader}"></div>
<div class="alert-bar" id="alertBar">
    [ì‹¤ì‹œê°„ ì•Œë¦¼] ì˜¤ëŠ˜ 3ë§ˆë¦¬ì˜ ë™ë¬¼ì´ ìƒˆë¡œìš´ ê°€ì¡±ì„ ë§Œë‚¬ì–´ìš”! ğŸ‰
</div>
<section class="hero">
    <h1>ìƒˆë¡œìš´ ê°€ì¡±ì„ ë§Œë‚˜ëŠ” ë”°ëœ»í•œ ì—°ê²°</h1>
    <p>ìœ ê¸°ë™ë¬¼ì—ê²Œ ë‘ ë²ˆì§¸ ê¸°íšŒë¥¼, ë‹¹ì‹ ì—ê²Œ íŠ¹ë³„í•œ ì¸ì—°ì„.<br>
        AdoptBridgeì—ì„œ ì†Œì¤‘í•œ ê°€ì¡±ì„ ë§Œë‚˜ë³´ì„¸ìš”.</p>
    <button class="cta-btn" onclick="document.getElementById('shelter-info-section').scrollIntoView({ behavior: 'smooth' });">ì…ì–‘ ë™ë¬¼ ë‘˜ëŸ¬ë³´ê¸°</button>
</section>
<section class="slider" id="slider">
    <div class="slide active" style="background-image:url('https://images.unsplash.com/photo-1518717758536-85ae29035b6d?auto=format&fit=crop&w=900&q=80');">
        <span>ì…ì–‘ ìº í˜ì¸ "í•¨ê»˜í•˜ëŠ” ê°€ì¡±ì°¾ê¸°"</span>
    </div>
    <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1518715308788-3005759c41b2?auto=format&fit=crop&w=900&q=80');">
        <span>ì§€ê¸ˆ, ë³´í˜¸ì†Œì˜ ì¹œêµ¬ë“¤ì´ ë‹¹ì‹ ì„ ê¸°ë‹¤ë ¤ìš”</span>
    </div>
    <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=900&q=80');">
        <span>ì…ì–‘ì€ ì‚¬ë‘, ì…ì–‘ì€ ì±…ì„</span>
    </div>
    <div class="dots"></div>
</section>

<section id="shelter-info-section" class="shelter-info">
    <h3>ë³´í˜¸ì†Œë¥¼ ì„ íƒí•˜ì‹œë©´ í•´ë‹¹ ë³´í˜¸ì†Œì˜ ë™ë¬¼ë“¤ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</h3>
    <div class="shelter-list" id="shelter-list-container">
    </div>
    <div id="shelter-pagination-container" class="pagination-container">
    </div>
</section>

<section id="animal-section">
    <h3 id="animal-list-title" style="text-align:center; color: var(--accent-dark); font-size: 1.8em; margin-bottom: 24px;">ëª¨ë“  ë³´í˜¸ ë™ë¬¼ ë³´ê¸°</h3>
    <div class="animal-cards" id="animal-cards-container">
    </div>
    <div id="animal-pagination-container" class="pagination-container">
    </div>
</section>

<section class="adopt-process">
    <h3>ì…ì–‘ ì ˆì°¨ ì•ˆë‚´</h3>
    <div class="process-steps">
        <div class="step"><div class="num">1</div><div class="desc">ì…ì–‘ ë™ë¬¼ ë‘˜ëŸ¬ë³´ê¸°</div></div>
        <div class="step"><div class="num">2</div><div class="desc">ì…ì–‘ ì‹ ì²­ì„œ ì‘ì„±</div></div>
        <div class="step"><div class="num">3</div><div class="desc">ìƒë‹´ ë° ë³´í˜¸ì†Œ ë°©ë¬¸</div></div>
        <div class="step"><div class="num">4</div><div class="desc">ì…ì–‘ í™•ì • ë° ê°€ì¡± ë§ì´</div></div>
    </div>
</section>

<!-- ì…ì–‘ í›„ê¸°/ìŠ¤í† ë¦¬ -->
<section class="adoption-stories">
    <h3>ì…ì–‘ í›„ê¸° & ë”°ëœ»í•œ ì´ì•¼ê¸°</h3>

</section>
<!-- FAQ -->
<
<!-- ê³µì§€/ì´ë²¤íŠ¸/ì°¸ì—¬ -->
<section class="notice-banner">
    6ì›”, ì…ì–‘ ìº í˜ì¸ ì§„í–‰ ì¤‘! <span style="color:#d84315;">ì…ì–‘ ì‹œ íŠ¹ë³„ ì„ ë¬¼ ì¦ì •</span> &nbsp;|&nbsp; ë´‰ì‚¬/í›„ì› ì°¸ì—¬ì ëª¨ì§‘
</section>
<!-- í•˜ë‹¨ í€µë©”ë‰´ -->

<footer th:fragment="site-footer" style="background:#222; color:#fff; padding:30px 0 10px 0; margin-top:60px;">
    <div style="max-width:1200px; margin:0 auto; display:flex; flex-wrap:wrap; justify-content:space-between; align-items:flex-start; gap:30px;">
        <!-- ì„œë¹„ìŠ¤ ì†Œê°œ -->
        <div>
            <h3 style="margin:0 0 10px 0; font-size:1.3em;">PetBridge</h3>
            <p style="margin:0; font-size:0.95em; color:#ccc;">
                ìœ ê¸°ë™ë¬¼ ë³´í˜¸ì†Œì™€ ì…ì–‘ í¬ë§ìë¥¼ ì—°ê²°í•˜ëŠ”<br>
                ë”°ëœ»í•œ ë™ë¬¼ ì»¤ë®¤ë‹ˆí‹° í”Œë«í¼ì…ë‹ˆë‹¤.
            </p>
        </div>
        <!-- ì£¼ìš” ë§í¬ -->
        <div>
            <ul style="list-style:none; padding:0; margin:0;">
                <li style="color:#fff; text-decoration:underline;">ì´ìš©ì•½ê´€</li>
                <li style="color:#fff; text-decoration:underline;">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</li>
                <li style="color:#fff; text-decoration:underline;">ë¬¸ì˜í•˜ê¸°</li>
            </ul>
        </div>
        <!-- SNS ë° ì—°ë½ì²˜ -->
        <div>
            <div style="margin-bottom:8px;">
                <a href="https://www.instagram.com/petbridge" style="margin-right:8px; color:#fff;" target="_blank" title="Instagram">
                    <img src="/static/img/instagram_icon.png" alt="Instagram" style="width:22px;vertical-align:middle;">
                </a>
                <a href="https://www.facebook.com/petbridge" style="margin-right:8px; color:#fff;" target="_blank" title="Facebook">
                    <img src="/static/img/facebook_icon.png" alt="Facebook" style="width:22px;vertical-align:middle;">
                </a>
                <a href="mailto:help@petbridge.com" style="color:#fff;" title="Email">
                    <img src="/static/img/email_icon.png" alt="Email" style="width:22px;vertical-align:middle;">
                </a>
            </div>
            <span style="font-size:0.9em; color:#ccc;">ë¬¸ì˜: help@petbridge.com</span>
        </div>
    </div>
    <hr style="border:none; border-top:1px solid #444; margin:24px 0 10px 0;">
    <p style="text-align:center; font-size:0.95em; color:#aaa; margin:0;">
        &copy; [[${#dates.format(#dates.createNow(), 'yyyy')}]] PetBridge. All rights reserved.
    </p>
</footer>



<script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸° ---
        const shelterContainer = document.getElementById('shelter-list-container');
        const shelterPaginationContainer = document.getElementById('shelter-pagination-container');
        const animalContainer = document.getElementById('animal-cards-container');
        const animalListTitle = document.getElementById('animal-list-title');
        const animalPaginationContainer = document.getElementById('animal-pagination-container');

        // --- ìƒíƒœ ë³€ìˆ˜ ---
        let allAnimals = [];
        let allShelters = [];
        let currentAnimalList = [];

        // --- ë³´í˜¸ì†Œ í˜ì´ì§€ë„¤ì´ì…˜ ìƒíƒœ ë³€ìˆ˜ ---
        let currentShelterPage = 1;
        const sheltersPerPage = 8;

        // --- ë™ë¬¼ í˜ì´ì§€ë„¤ì´ì…˜ ìƒíƒœ ë³€ìˆ˜ ---
        let currentAnimalPage = 1;
        const animalsPerPage = 9;

        // --- ë°ì´í„° ë¡œë”© ---
        Promise.all([
            fetch('/data/animals.json'),
            fetch('/data/animals2.json')
        ])
            .then(responses => Promise.all(responses.map(res => res.json())))
            .then(dataArray => {
                const items1 = dataArray[0].response.body.items.item;
                const items2 = dataArray[1].response.body.items.item;
                allAnimals = [...items1, ...items2];
                initializeApp();
            })
            .catch(error => {
                console.error('JSON íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:', error);
                shelterContainer.innerHTML = '<p style="text-align:center;">ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p>';
                animalContainer.innerHTML = '';
            });

        function initializeApp() {
            const shelterMap = {};
            allAnimals.forEach(animal => {
                if (animal.careNm && !shelterMap[animal.careNm]) {
                    shelterMap[animal.careNm] = { name: animal.careNm, addr: animal.careAddr, count: 0 };
                }
                if (animal.careNm) shelterMap[animal.careNm].count++;
            });
            allShelters = Object.values(shelterMap);

            setupShelterPagination();
            displayShelters(1);

            filterAnimalsByShelter('all');
        }

        function createShelterCard(shelter) {
            const shelterCard = document.createElement('div');
            shelterCard.className = 'shelter-card';
            shelterCard.innerHTML = `<div class="name">${shelter.name}</div><div class="desc">${shelter.addr} (${shelter.count}ë§ˆë¦¬ ë³´í˜¸ì¤‘)</div>`;
            shelterCard.onclick = () => filterAnimalsByShelter(shelter.name);
            return shelterCard;
        }

        function createAllShelterCard() {
            const allShelterCard = document.createElement('div');
            allShelterCard.className = 'shelter-card';
            allShelterCard.innerHTML = `<div class="name">ì „ì²´ ë³´ê¸°</div><div class="desc">ëª¨ë“  ë³´í˜¸ì†Œì˜ ë™ë¬¼ì„ ë´…ë‹ˆë‹¤.</div>`;
            allShelterCard.onclick = () => filterAnimalsByShelter('all');
            return allShelterCard;
        }

        function displayShelters(page) {
            currentShelterPage = page;
            shelterContainer.innerHTML = '';
            shelterContainer.appendChild(createAllShelterCard());

            const startIndex = (page - 1) * sheltersPerPage;
            const endIndex = startIndex + sheltersPerPage;
            const paginatedShelters = allShelters.slice(startIndex, endIndex);

            paginatedShelters.forEach(shelter => shelterContainer.appendChild(createShelterCard(shelter)));
            updateShelterPaginationButtons();
        }

        function setupShelterPagination() {
            shelterPaginationContainer.innerHTML = '';
            const pageCount = Math.ceil(allShelters.length / sheltersPerPage);
            if (pageCount <= 1) return;

            for (let i = 1; i <= pageCount; i++) {
                const btn = document.createElement('button');
                btn.innerText = i;
                btn.addEventListener('click', () => displayShelters(i));
                shelterPaginationContainer.appendChild(btn);
            }
        }

        function updateShelterPaginationButtons() {
            const buttons = shelterPaginationContainer.querySelectorAll('button');
            buttons.forEach(button => {
                button.classList.toggle('active', parseInt(button.innerText) === currentShelterPage);
            });
        }

        // --- ë™ë¬¼ ì¹´ë“œ ìƒì„± í•¨ìˆ˜ ---
        // [ìˆ˜ì •] animal.popfile -> animal.popfile1, animal.kindCd -> animal.kindNm ë¡œ ë³€ê²½
        function createAnimalCard(animal) {
            const sex = animal.sexCd === 'F' ? 'ì•”ì»·' : (animal.sexCd === 'M' ? 'ìˆ˜ì»·' : 'ë¯¸ìƒ');
            const neuter = animal.neuterYn === 'Y' ? 'ì™„ë£Œ' : (animal.neuterYn === 'N' ? 'ì•ˆë¨' : 'ë¯¸ìƒ');
            const card = document.createElement('div');
            card.className = 'animal-card';
            card.innerHTML = `<img src="${animal.popfile1}" alt="${animal.kindNm}" onerror="this.onerror=null;this.src='https://via.placeholder.com/300x220/f0f0f0/cccccc?text=Image+Not+Found';"><div class="info"><h4>${animal.kindNm} <span style="font-size:0.8em; color: #6d4c41;">(${sex})</span></h4><p><strong>ë‚˜ì´:</strong> ${animal.age}<br><strong>ì²´ì¤‘:</strong> ${animal.weight}<br><strong>íŠ¹ì§•:</strong> ${animal.specialMark || 'íŠ¹ì´ì‚¬í•­ ì—†ìŒ'}<br><strong>ì¤‘ì„±í™”:</strong> ${neuter}</p><div class="tag">${animal.processState}</div></div>`;
            return card;
        }

        function displayAnimals(page) {
            currentAnimalPage = page;
            animalContainer.innerHTML = '';
            const startIndex = (page - 1) * animalsPerPage;
            const endIndex = startIndex + animalsPerPage;
            const paginatedAnimals = currentAnimalList.slice(startIndex, endIndex);
            paginatedAnimals.forEach(animal => animalContainer.appendChild(createAnimalCard(animal)));
            updateAnimalPaginationButtons();
        }

        function setupAnimalPagination() {
            animalPaginationContainer.innerHTML = '';
            const pageCount = Math.ceil(currentAnimalList.length / animalsPerPage);
            if (pageCount <= 1) return;

            for (let i = 1; i <= pageCount; i++) {
                const btn = document.createElement('button');
                btn.innerText = i;
                btn.addEventListener('click', () => {
                    displayAnimals(i);
                    document.getElementById('animal-section').scrollIntoView({ behavior: 'smooth' });
                });
                animalPaginationContainer.appendChild(btn);
            }
        }

        function updateAnimalPaginationButtons() {
            const buttons = animalPaginationContainer.querySelectorAll('button');
            buttons.forEach(button => {
                button.classList.toggle('active', parseInt(button.innerText) === currentAnimalPage);
            });
        }

        window.filterAnimalsByShelter = (shelterName) => {
            if (shelterName === 'all') {
                currentAnimalList = [...allAnimals];
                animalListTitle.textContent = 'ëª¨ë“  ë³´í˜¸ ë™ë¬¼ ë³´ê¸°';
            } else {
                currentAnimalList = allAnimals.filter(animal => animal.careNm === shelterName);
                animalListTitle.textContent = `"${shelterName}" ë³´í˜¸ ë™ë¬¼ ë³´ê¸°`;
            }
            setupAnimalPagination();
            displayAnimals(1);
        }

        const slides = document.querySelectorAll('.slide');
        const dotsContainer = document.querySelector('.slider .dots');
        let currentSlide = 0;
        let slideInterval;

        function showSlide(idx) {
            if (!slides.length) return;
            currentSlide = idx;

            slides.forEach(slide => slide.classList.remove('active'));
            slides[currentSlide].classList.add('active');

            const dots = dotsContainer.children;
            for (let dot of dots) {
                dot.classList.remove('active');
            }
            if (dots[currentSlide]) {
                dots[currentSlide].classList.add('active');
            }
        }

        function startSlider() {
            if (dotsContainer) {
                dotsContainer.innerHTML = '';
                slides.forEach((_, i) => {
                    const dot = document.createElement('div');
                    dot.className = 'dot';
                    dot.addEventListener('click', () => {
                        showSlide(i);
                        clearInterval(slideInterval);
                        slideInterval = setInterval(() => {
                            showSlide((currentSlide + 1) % slides.length);
                        }, 3500);
                    });
                    dotsContainer.appendChild(dot);
                });
            }

            showSlide(0);
            slideInterval = setInterval(() => {
                showSlide((currentSlide + 1) % slides.length);
            }, 3500);
        }

        startSlider();

        setTimeout(() => {
            const alertBar = document.getElementById('alertBar');
            if (alertBar) alertBar.style.display = 'none';
        }, 5000);
    });
</script>
</body>
</html>
